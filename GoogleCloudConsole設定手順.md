# Google Cloud Console 設定手順

TimeDonutアプリでGoogle Calendar APIを使用するための設定手順です。

---

## 前提条件

- Googleアカウントを持っていること
- ブラウザでGoogle Cloud Consoleにアクセスできること

---

## 手順

### 1. Google Cloud Consoleにアクセス

```
https://console.cloud.google.com/
```

ブラウザで上記URLを開き、Googleアカウントでサインインしてください。

---

### 2. 新しいプロジェクトを作成

1. 画面上部の「プロジェクトを選択」をクリック
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を入力: `TimeDonut`
4. 「作成」をクリック
5. 作成されたプロジェクトを選択

---

### 3. Google Calendar APIを有効化

1. 左側メニューから「APIとサービス」→「ライブラリ」を選択
2. 検索バーに `Google Calendar API` と入力
3. 「Google Calendar API」をクリック
4. 「有効にする」ボタンをクリック

---

### 4. OAuth同意画面を設定

1. 左側メニューから「APIとサービス」→「OAuth同意画面」を選択
2. ユーザータイプを選択:
   - **外部** を選択（個人開発の場合）
   - 「作成」をクリック

3. アプリ情報を入力:
   ```
   アプリ名: TimeDonut
   ユーザーサポートメール: (あなたのメールアドレス)
   デベロッパーの連絡先情報: (あなたのメールアドレス)
   ```

4. 「保存して次へ」をクリック

5. スコープの設定:
   - 「スコープを追加または削除」をクリック
   - 検索バーに `calendar` と入力
   - 以下のスコープを選択:
     - `https://www.googleapis.com/auth/calendar.readonly` (読み取り専用)
   - 「更新」をクリック
   - 「保存して次へ」をクリック

6. テストユーザーの追加（開発中のみ必要）:
   - 「ADD USERS」をクリック
   - あなたのGoogleアカウントのメールアドレスを入力
   - 「追加」をクリック
   - 「保存して次へ」をクリック

7. 「ダッシュボードに戻る」をクリック

---

### 5. OAuth 2.0 クライアントIDを作成

1. 左側メニューから「APIとサービス」→「認証情報」を選択
2. 上部の「認証情報を作成」をクリック
3. 「OAuth クライアント ID」を選択
4. アプリケーションの種類を選択:
   - **macOS** または **デスクトップアプリ** を選択

5. 名前を入力: `TimeDonut macOS App`

6. 「作成」をクリック

7. ポップアップが表示されます:
   - **クライアントID** と **クライアントシークレット** が表示されます
   - これらをメモしてください（後で使用します）
   - または「JSONをダウンロード」をクリック

---

### 6. 認証情報のダウンロード（推奨）

1. 作成した認証情報の右側にある「︙」（縦三点）をクリック
2. 「JSONをダウンロード」を選択
3. ダウンロードされたファイルを `TimeDonut` ディレクトリに保存
4. ファイル名を `GoogleService-Info.json` に変更

---

## 取得した情報の確認

以下の情報が取得できていることを確認してください：

### 必須情報

```
□ クライアントID (例: 123456789-abcdefg.apps.googleusercontent.com)
□ クライアントシークレット (例: GOCSPX-xxxxxxxxxxxxx)
```

または

```
□ GoogleService-Info.json ファイル
```

---

## ファイル配置

ダウンロードしたJSONファイルを以下のように配置してください：

```
TimeDonut/
├── GoogleService-Info.json  ← ここに配置
├── 要件定義書.md
├── 仕様書.md
└── 設計書.md
```

**重要**: このファイルには機密情報が含まれているため、Gitにコミットしないでください。

---

## 次のステップ

設定が完了したら、以下を確認してください：

- [ ] Google Calendar APIが有効になっている
- [ ] OAuth同意画面が設定されている
- [ ] OAuth 2.0クライアントIDが作成されている
- [ ] GoogleService-Info.json がダウンロードされている（または認証情報をメモしている）

すべて完了したら、プロジェクトのセットアップに進むことができます。

---

## トラブルシューティング

### Q: OAuth同意画面で「未確認」と表示される

A: 開発中は問題ありません。公開する場合は、Googleの確認プロセスを通す必要があります。

### Q: テストユーザーとして追加したアカウントでしかログインできない

A: OAuth同意画面が「テスト」モードになっているためです。開発中はこれで問題ありません。

### Q: クライアントIDとシークレットを忘れた

A: 「認証情報」画面から再度確認できます。JSONファイルを再ダウンロードすることも可能です。

---

## 参考リンク

- [Google Calendar API ドキュメント](https://developers.google.com/calendar/api/guides/overview)
- [OAuth 2.0 認証](https://developers.google.com/identity/protocols/oauth2)
- [Google Cloud Console](https://console.cloud.google.com/)

---

**設定完了後、次のステップに進めます！**
